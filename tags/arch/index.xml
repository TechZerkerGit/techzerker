<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>Arch - Tag - TechZerker</title>
        <link>https://techzerker.com/tags/arch/</link>
        <description>Arch - Tag - TechZerker</description>
        <generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Fri, 24 Apr 2020 00:00:00 &#43;0000</lastBuildDate><atom:link href="https://techzerker.com/tags/arch/" rel="self" type="application/rss+xml" /><item>
    <title>Arch Linux â€“ Conflicting Files and the Arch Wiki</title>
    <link>https://techzerker.com/posts/2020/2020-04-24-arch-wiki-conflicts/</link>
    <pubDate>Fri, 24 Apr 2020 00:00:00 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://techzerker.com/posts/2020/2020-04-24-arch-wiki-conflicts/</guid>
    <description><![CDATA[<p>It is no secret that my favorite distro for Linux after much trial and error, landed on <a href="https://archlinux.org">Arch Linux</a>.</p>
<p>I found I prefer the rolling release model vs major version upgrades and the AUR (Arch User Repository) is incredible for finding and installing packages. That being said, it&rsquo;s biggest win is the <a href="https://wiki.archlinux.org/">Arch Wiki</a>. I find however, that no matter how often that is repeated in the Arch circles, you still find forums full of solutions that the Arch Wiki covers better, or even conflict the Wiki.</p>
<p>I wrote this today, because I saw that example again in searching, where probably due to some previous mistake, when I went to update my system today, I was getting a failure for a pair of conflicting packages, which prevents updating as part of Arch giving you a chance to make sure you know what your doing&hellip;</p>
<p>A search for <a href="https://duckduckgo.com/?q=arch&#43;pacman&#43;%2B&#43;conflicting&#43;files"><em>Arch Pacman + Conflicting Files</em></a> returns all sorts of results, from various BBS Sites, Reddit, and Forums, with the Arch Wiki nestled tightly among them.</p>
<p>However, in a rather large number of the forums I took a quick browse at, were suggestions like: <code>pacman -Syuf</code> and <code>pacman -Suf</code>, among others, which most importantly are encouraging the <code>f</code> <em>force</em> flag. In some cases, other responses speak up right away much as I am, and suggest not taking that approach, as it&rsquo;s a very strong-handed and dangerous approach to updating an Arch system.</p>
<p>Sure enough, in a bunch of cases (not a scientific sampling), there are follow-up posts of panic stricken users, who range from <em>system won&rsquo;t boot</em> to <em>pacman is completely broken</em>, and other results. Where a quick search for this same problem to the Arch Wiki, leads you down the <em>Pacman</em> page to it&rsquo;s <a href="https://wiki.archlinux.org/index.php/Pacman#%22Failed_to_commit_transaction_%28conflicting_files%29%22_error">troubleshooting section</a>.</p>
<p>The core solution detailed:</p>
<blockquote>
<p>This is happening because pacman has detected a file conflict, and by design, will not overwrite files for you. This is by design, not a flaw.</p>
<p>The problem is usually trivial to solve. A safe way is to first check if another package owns the file (<code>pacman -Qo /path/to/file</code>). If the file is owned by another package, file a bug report. If the file is not owned by another package, rename the file which &lsquo;exists in filesystem&rsquo; and re-issue the update command. If all goes well, the file may then be removed.</p>
</blockquote>
<p>Sure enough, in my case, I ran <code>pacman -Qo /usr/lib/thefileinquestion</code>, and it returned that no package owned that file. So following the wiki, I did a quick rename of that file (not delete, in case it does end up being needed!). I re-ran my update process, no conflicts, and everything appears to be working! Simple :)</p>
<p>In the case of Arch, when in doubt, <em>start</em> with the <a href="https://wiki.archlinux.org/">Arch Wiki</a>, and then ask for elaborations on those solutions if they are not working, or not solving your problem, and you likely will save yourself a lot of headache!</p>
<p>I even went so far for a while, as to run one of my self-hosted servers on <a href="https://www.vultr.com/?ref=7975115">Vultr</a> on Arch, given they allowed custom ISOs! It is not always the best solution for a server, depending on the applications running, but its worth evaluating, and again, it&rsquo;s hard to fault the documentation power of the Wiki.</p>]]></description>
</item><item>
    <title>Arch Linux: Blind Updating, PostgreSQL and MiniFlux</title>
    <link>https://techzerker.com/posts/2019-11-27-arch-server-updates/</link>
    <pubDate>Wed, 27 Nov 2019 00:00:00 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://techzerker.com/posts/2019-11-27-arch-server-updates/</guid>
    <description><![CDATA[<p>Among the #self-hosted projects that I run just for my own usage, I have a <a href="https://www.vultr.com/?ref=7975116-4F">VPS server running Arch Linux</a>. (Yes, I&rsquo;m running an Arch server, instead of Ubuntu/Debian)</p>
<p>That little VPS runs a few different services:</p>
<ul>
<li>Minecraft server for a group of friends, which is the heavy memory user</li>
<li><a href="https://writefreely.org">Write Freely</a> instances for a few subjects</li>
<li>Subsonic Music streaming server</li>
<li>Resilio Sync encrypted storage target</li>
<li>MiniFlux RSS Server/Reader</li>
</ul>
<p>In general, it ticks along without much need for attention. Usually it&rsquo;s biggest time demands are after each major Minecraft version update (11.x, 12.x, etc.) to adjust settings as it gets more and more resource hungry.</p>
<blockquote>
<p>FYI: The best solution on 14.x now has been <a href="https://papermc.io/">PaperMC</a></p>
</blockquote>
<p>Given I work in tech and personally work with Arch Linux plenty, I make sure to run updates on the server weekly, and they almost always are pretty basic updates without much significance. Generally update with my AUR Helper, check the applications, and off I go.</p>
<p>This time around this past weekend, but only discovered last night, the updates included an update of PostgreSQL from 11.6 to 12.x. On this server, MiniFlux RSS uses PostgreSQL for it&rsquo;s backend, and it works well. However, in my past experience I have never had anything use PostgreSQL to have had much awareness about it&rsquo;s sensitivity in upgrading versions. As such, the update itself did not fail, but when I went to check my Android app which pulls from MiniFlux (via Fever API), it showed it had not pulled for several days.</p>
<p>A quick investigation showed that MiniFlux itself did not have an update, but PostgreSQL had indeed updated and the service would not start, according to systemd. A quick check in journalctl -xe, and the source was found as incompatible database versions for PostgreSQL.</p>
<p>From that point, it was thankfully not a hard fix, likely because the database for the RSS system is not that large or complex. Referring to the faithful <a href="https://wiki.archlinux.org/index.php/PostgreSQL#Upgrading_PostgreSQL">Arch Wiki</a> sent me through a few commands to migrate the data to a backup folder, initialize a new database set under version 12, and then use the <code>pg_upgrade</code> function to upgrade the database to that version. PG_Upgrade did it&rsquo;s job without fail on the first run, and I was able to then start the PostgreSQL service, followed by a restart of the MiniFlux service.</p>
<p>All in all, not a hard process or experience, just a good reminder to keep an eye on packages updating. It&rsquo;s ideal to be aware of what you are updating, but sometimes an innocent looking update breaks things. When it&rsquo;s a hobby server, keep good backups and be willing to research the fix, and you&rsquo;ll learn a bit along the way.</p>
<p>I&rsquo;m not sure what my next project will be to add to my #Self-Hosted systems, but I&rsquo;ve started catching up on the <a href="https://selfhosted.show/">Self-Hosted Podcast</a> from Jupiter Broadcasting, so I&rsquo;m sure I&rsquo;ll discover something new!</p>
<p>If you don&rsquo;t yet #Self-Host and are looking for a project, I run my projects currently on Vultr, and sticking with plain <a href="https://www.vultr.com/?ref=7975116-4F">direct referral link</a>, you can help me out by giving <a href="https://www.vultr.com/?ref=7975116-4F">Vultr</a> a try with $50 worth of hosting, and it helps me out as well.</p>
<blockquote>
<p>I have a About / Privacy page linked at the top where I talk about my privacy rules: Text only referral links, no cookies/trackers, no ugly banners or graphics interrupting the writing.</p>
</blockquote>]]></description>
</item></channel>
</rss>
